{% extends 'base.html.twig' %}
{% block title %}Raporty{% endblock %}
{% block body %}
    <h2>Raporty</h2>
    <form class="row g-2 mb-3" method="get">
        <div class="col-auto"><input class="form-control" type="date" name="from" value="{{ app.request.get('from') }}">
        </div>
        <div class="col-auto"><input class="form-control" type="date" name="to" value="{{ app.request.get('to') }}">
        </div>
        <div class="col-auto"><input class="form-control" type="text" name="household" placeholder="UUID gospodarstwa"
                                     value="{{ app.request.get('household') }}"></div>
        <div class="col-auto">
            <button class="btn btn-primary">Filtruj</button>
        </div>
    </form>
    <div class="mb-3"><h5>Suma (grosze): {{ sum }}</h5></div>
    <div class="row">
        <div class="col-md-6">
            <h6>Wg kategorii</h6>
            <table class="table table-sm">
                <tr>
                    <th>category_id</th>
                    <th>suma (gr)</th>
                </tr>
                {% for r in byCat %}
                    <tr>
                    <td>{{ r.category_id }}</td>
                    <td>{{ r.sum }}</td></tr>{% else %}
                    <tr>
                        <td colspan="2">brak</td>
                    </tr>{% endfor %}
            </table>
        </div>
        <div class="col-md-6">
            <h6>Wg sklep√≥w</h6>
            <table class="table table-sm">
                <tr>
                    <th>store_id</th>
                    <th>suma (gr)</th>
                </tr>
                {% for r in byStore %}
                    <tr>
                    <td>{{ r.store_id }}</td>
                    <td>{{ r.sum }}</td></tr>{% else %}
                    <tr>
                        <td colspan="2">brak</td>
                    </tr>{% endfor %}
            </table>
        </div>
    </div>
    <div class="mt-3">
        <h6>TOP produkty</h6>
        <table class="table table-sm">
            <tr>
                <th>product_id</th>
                <th>suma (gr)</th>
            </tr>
            {% for r in byProductTop %}
                <tr>
                <td>{{ r.product_id }}</td>
                <td>{{ r.sum }}</td></tr>{% else %}
                <tr>
                    <td colspan="2">brak</td>
                </tr>{% endfor %}
        </table>
    </div>
{% endblock %}
